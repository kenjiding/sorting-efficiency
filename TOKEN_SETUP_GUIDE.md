# Token 设置快速指南

## 🎯 Token 设置入口

### 方式 1: 通过侧边栏菜单（推荐）

1. 启动应用
2. 在左侧边栏找到 **"系统设置"** 菜单（最下方，齿轮图标）
3. 点击进入设置页面
4. 在 **"外部接口 Token"** 卡片中设置

### 方式 2: 直接访问

浏览器地址栏输入：`http://localhost:5173/settings`

## 📝 设置步骤

1. **进入设置页面**
   - 在侧边栏点击"系统设置"

2. **查看当前 Token**
   - Token 默认显示为遮罩格式（例如：`23921c36****e32`）
   - 点击眼睛图标可显示/隐藏完整 Token

3. **更新 Token**
   - 点击"编辑"按钮（铅笔图标）
   - 在输入框中粘贴新的 Token
   - 点击"保存"按钮
   - 看到"Token 更新成功！"提示

4. **验证**
   - Token 会自动保存到浏览器本地存储
   - 之后所有外部接口调用都会自动带上这个 Token

## 🔍 Token 存储位置

- **前端**: 浏览器 localStorage
- **Key**: `external_api_token`
- **作用域**: 当前浏览器
- **持久性**: 永久保存（除非手动清除）

## 🚀 工作原理

```
用户设置 Token
    ↓
保存到 localStorage
    ↓
useExternalApi Hook 自动读取
    ↓
每次请求自动带上
    ↓
后端使用 Token 调用外部接口
```

## 💡 注意事项

### ✅ 优点
- Token 保存在本地，安全方便
- 不同浏览器可以使用不同的 Token
- 刷新页面 Token 不会丢失

### ⚠️ 注意
- 如果没有设置 Token，后端会使用默认 Token
- 清除浏览器数据会删除 Token
- 不同设备需要分别设置

## 🐛 常见问题

### Q: 如何查看当前保存的 Token？

**方法 1**: 在设置页面查看
- 进入"系统设置"页面
- 点击眼睛图标显示完整 Token

**方法 2**: 在浏览器控制台查看
```javascript
localStorage.getItem('external_api_token')
```

### Q: Token 丢失了怎么办？

1. 重新进入设置页面
2. 输入新的 Token
3. 点击保存

### Q: 如何清除 Token？

**方法 1**: 在设置页面清除
- 点击编辑
- 清空输入框
- 点击保存

**方法 2**: 在浏览器控制台清除
```javascript
localStorage.removeItem('external_api_token')
```

### Q: 多个浏览器 Tab 会共享 Token 吗？

是的，同一浏览器的所有 Tab 共享相同的 localStorage，所以会使用同一个 Token。

## 📱 页面截图说明

### 侧边栏菜单
```
┌─────────────────────────┐
│  分拣管理系统            │
├─────────────────────────┤
│  📊 数据录入             │
│  📈 数据分析             │
│  💰 工资结算             │
│  📱 数据报表看板          │
│  ⚙️  系统设置  ← 这里！   │
└─────────────────────────┘
```

### 设置页面布局
```
┌──────────────────────────────────┐
│  ⚙️  系统设置                      │
│  管理系统配置和外部接口设置          │
├──────────────────────────────────┤
│                                   │
│  🔑 外部接口 Token                │
│  ┌─────────────────────────────┐ │
│  │ ℹ️  Token 用途说明            │ │
│  │ • 用于访问外部 iMile DMS     │ │
│  │ • Token 保存在浏览器本地      │ │
│  │ • 每次调用自动带上           │ │
│  └─────────────────────────────┘ │
│                                   │
│  当前 Token:                      │
│  [23921c36****e32] 👁️ ✏️          │
│                                   │
│  Token 保存在浏览器本地存储中       │
│                                   │
└──────────────────────────────────┘
```

## 🎉 完成！

现在你可以：
1. 随时在"系统设置"页面查看和更新 Token
2. Token 会自动应用到所有外部接口调用
3. 无需担心 Token 管理问题

祝使用愉快！🚀

